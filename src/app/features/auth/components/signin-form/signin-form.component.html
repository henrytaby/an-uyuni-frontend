<div class="flex flex-col w-full h-full justify-center items-center px-4 sm:px-0">

  <!-- Glassmorphism Card -->
  <div
    class="w-full max-w-[420px] p-6 sm:p-8 rounded-2xl backdrop-blur-xl bg-white/70 dark:bg-gray-900/60 border border-white/40 dark:border-white/10 shadow-2xl transition-all duration-300">

    <!-- Branding Section -->
    <div class="flex flex-col items-center mb-6">
      <div class="relative w-full flex justify-center mb-5">
        <!-- Light Mode Logo -->
        <img
          class="h-14 w-auto object-contain drop-shadow-sm transition-transform hover:scale-105 duration-300 dark:hidden"
          src="/images/bolivia/bolivia-aduana-nacional-01.png" alt="Aduana Nacional" />

        <!-- Dark Mode Logo -->
        <img
          class="hidden h-14 w-auto object-contain drop-shadow-sm transition-transform hover:scale-105 duration-300 dark:block"
          src="/images/bolivia/bolivia-aduana-nacional-02.png" alt="Aduana Nacional" />
      </div>

      <div class="text-center space-y-1">
        <h2 class="text-xl font-bold text-gray-800 dark:text-white tracking-tight">
          Bienvenido de nuevo
        </h2>
        <p class="text-xs text-gray-500 dark:text-gray-400">
          Ingrese sus credenciales para acceder al sistema
        </p>
      </div>
    </div>

    <!-- Error Message (Unified Server + Local) -->
    @if (errorMessage() || localError) {
    <div class="mb-6 fade-in-up">
      <div
        class="flex items-center gap-3 px-4 py-3 rounded-lg bg-red-50/80 dark:bg-red-900/10 border border-red-100 dark:border-red-500/10">
        <i class="pi pi-exclamation-circle text-red-600 dark:text-red-400 text-lg"></i>
        <span class="text-sm font-normal text-red-700 dark:text-red-300">
          {{ errorMessage() || localError }}
        </span>
      </div>
    </div>
    }

    <!-- Login Form -->
    <form (ngSubmit)="onSignIn()" class="space-y-5">

      <!-- Username Field -->
      <div class="w-full">
        <p-floatLabel>
          <input pInputText id="username" [(ngModel)]="username" (ngModelChange)="clearError()" name="username"
            class="w-full !bg-white/50 dark:!bg-black/20" [disabled]="isLoading()" required />
          <label for="username">Usuario</label>
        </p-floatLabel>
      </div>

      <!-- Password Field -->
      <div class="w-full">
        <p-floatLabel>
          <p-password id="password" [(ngModel)]="password" (ngModelChange)="clearError()" name="password"
            [toggleMask]="true" [feedback]="false" styleClass="w-full"
            inputStyleClass="w-full !bg-white/50 dark:!bg-black/20" [disabled]="isLoading()" required />
          <label for="password">Contraseña</label>
        </p-floatLabel>
      </div>

      <!-- Submit Button -->
      <div class="pt-2">
        <p-button label="Iniciar Sesión" [loading]="isLoading()" type="submit" styleClass="w-full" size="large">
        </p-button>
      </div>

    </form>

    <!-- Footer -->
    <div class="mt-6 pt-5 border-t border-gray-200/50 dark:border-white/10 text-center">
      <p class="text-[10px] text-gray-400 dark:text-gray-500 uppercase tracking-wider">
        © 2026 Aduana Nacional de Bolivia
      </p>
    </div>

  </div>
</div>