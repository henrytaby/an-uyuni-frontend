<div class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]">
  <div class="custom-calendar">
    <full-calendar #calendar [options]="calendarOptions"></full-calendar>
  </div>

  <p-dialog [(visible)]="isOpen" [modal]="true" [header]="selectedEvent ? 'Editar Evento' : 'Agregar Evento'"
    [style]="{ width: '500px' }" [draggable]="false" [resizable]="false" (onHide)="closeModal()"
    styleClass="p-dialog-custom">
    <ng-template pTemplate="content">
      <div class="flex flex-col gap-6 pt-4">
        <!-- Event Title -->
        <div class="flex flex-col gap-2">
          <label for="event-title" class="text-sm font-medium text-gray-700 dark:text-gray-300">
            Título del Evento
          </label>
          <input pInputText id="event-title" [(ngModel)]="eventTitle" fluid="true" placeholder="Ingrese título"
            class="w-full" />
        </div>

        <!-- Event Color -->
        <div class="flex flex-col gap-2">
          <span class="text-sm font-medium text-gray-700 dark:text-gray-300">
            Color del Evento
          </span>
          <div class="flex flex-wrap gap-4">
            @for (entry of (calendarsEvents | keyvalue); track $index) {
            <div class="flex items-center gap-2">
              <p-radioButton name="eventLevel" [value]="entry.key" [(ngModel)]="eventLevel" [inputId]="entry.key" />
              <label [for]="entry.key" class="cursor-pointer text-sm text-gray-600 dark:text-gray-400">
                {{ entry.key }}
              </label>
            </div>
            }
          </div>
        </div>

        <!-- Start Date -->
        <div class="flex flex-col gap-2">
          <label for="event-start-date" class="text-sm font-medium text-gray-700 dark:text-gray-300">
            Fecha de Inicio
          </label>
          <p-datePicker id="event-start-date" inputId="event-start-date" [(ngModel)]="eventStartDate"
            dateFormat="yy-mm-dd" dataType="string" [showIcon]="true" fluid="true" appendTo="body"
            styleClass="w-full" />
        </div>

        <!-- End Date -->
        <div class="flex flex-col gap-2">
          <label for="event-end-date" class="text-sm font-medium text-gray-700 dark:text-gray-300">
            Fecha de Fin
          </label>
          <p-datePicker id="event-end-date" inputId="event-end-date" [(ngModel)]="eventEndDate" dateFormat="yy-mm-dd"
            dataType="string" [showIcon]="true" fluid="true" appendTo="body" styleClass="w-full" />
        </div>
      </div>
    </ng-template>

    <ng-template pTemplate="footer">
      <div class="flex justify-end gap-2 pt-4">
        <p-button label="Cerrar" icon="pi pi-times" [text]="true" severity="secondary" (onClick)="closeModal()" />
        <p-button [label]="selectedEvent ? 'Guardar Cambios' : 'Agregar Evento'" icon="pi pi-check"
          (onClick)="handleAddOrUpdateEvent()" />
      </div>
    </ng-template>
  </p-dialog>
</div>